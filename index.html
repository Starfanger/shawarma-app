<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Doner Duck</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Roboto', 'Helvetica', sans-serif;
        }
        
        body {
            background-color: #fff;
            color: #333;
            max-width: 500px;
            margin: 0 auto;
            overflow-x: hidden;
            position: relative;
            padding-bottom: 60px;
        }
        
        /* –û—Ä–∞–Ω–∂–µ–≤—ã–π —Ö—ç–¥—ç—Ä */
        .header {
            background: linear-gradient(to right, #ff8a00, #ff5e00);
            padding: 15px 15px 10px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .logo-img {
            width: 40px;
            height: 40px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: #ff5e00;
            font-size: 20px;
        }
        
        .logo-text {
            color: white;
            font-weight: 700;
            font-size: 20px;
            text-shadow: 0 1px 2px rgba(0,0,0,0.2);
        }
        
        .header-actions {
            display: flex;
            gap: 10px;
        }
        
        .header-icon {
            width: 32px;
            height: 32px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #ff5e00;
        }
        
        /* –ü–æ–∏—Å–∫–æ–≤–∞—è —Å—Ç—Ä–æ–∫–∞ */
        .search-bar {
            background: #fff;
            padding: 15px;
            border-bottom: 1px solid #eee;
        }
        
        .search-input {
            background: #f8f8f8;
            border-radius: 20px;
            padding: 12px 20px;
            width: 100%;
            border: none;
            font-size: 14px;
        }
        
        /* –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ */
        .categories {
            padding: 15px;
            display: flex;
            gap: 10px;
            overflow-x: auto;
            scrollbar-width: none;
        }
        
        .categories::-webkit-scrollbar {
            display: none;
        }
        
        .category {
            background: #f8f8f8;
            border-radius: 20px;
            padding: 10px 20px;
            white-space: nowrap;
            font-size: 14px;
            font-weight: 500;
            color: #666;
            border: 1px solid #eee;
            min-width: 100px;
        }
        
        .category.active {
            background: #ff5e00;
            color: white;
            border: none;
        }
        
        /* –ë–∞–Ω–Ω–µ—Ä */
        .banner {
            position: relative;
            margin: 15px;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .banner-img {
            width: 100%;
            height: 300px;
            background: #ff8a00;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
            font-weight: bold;
            text-align: center;
            position: relative;
        }
        
        .banner-content {
            position: absolute;
            bottom: 20px;
            left: 20px;
            right: 20px;
            background: rgba(0,0,0,0.6);
            padding: 15px;
            border-radius: 12px;
        }
        
        .banner-title {
            font-size: 22px;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .banner-subtitle {
            font-size: 14px;
            opacity: 0.9;
        }
        
        /* –ö–µ—à–±—ç–∫ */
        .cashback {
            background: white;
            padding: 15px;
            border-radius: 16px;
            margin: 0 15px 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border: 1px solid #f0f0f0;
        }
        
        .cashback-left {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .cashback-icon {
            width: 40px;
            height: 40px;
            background: #ff5e00;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 20px;
        }
        
        .cashback-text {
            font-weight: 500;
        }
        
        .cashback-amount {
            font-size: 32px;
            font-weight: bold;
            color: #ff5e00;
        }
        
        /* –ù–∏–∂–Ω—è—è –ø–∞–Ω–µ–ª—å */
        .bottom-bar {
            background: white;
            padding: 15px;
            border-top: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            position: fixed;
            bottom: 0;
            width: 100%;
            max-width: 500px;
            margin: 0 auto;
        }
        
        .bar-item {
            text-align: center;
        }
        
        .bar-icon {
            width: 30px;
            height: 30px;
            background: #f8f8f8;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 5px;
            color: #666;
        }
        
        .bar-text {
            font-size: 12px;
            color: #666;
        }
        
        .bar-item.active .bar-icon {
            background: #ff5e00;
            color: white;
        }
        
        .bar-item.active .bar-text {
            color: #ff5e00;
            font-weight: 500;
        }
        
        /* –ë–ª–æ–∫ –∑–∞–∫–∞–∑–∞ */
        .order-block {
            padding: 15px;
            margin: 0 15px 15px;
            background: white;
            border-radius: 16px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.05);
        }
        
        .section-title {
            font-size: 18px;
            font-weight: 600;
            margin: 15px 0 10px;
            color: #333;
        }
        
        .radio-group {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .radio-option {
            flex: 1;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .radio-option.active {
            border-color: #ff5e00;
            background-color: #fff8f0;
        }
        
        .checkbox-group {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
        }
        
        .checkbox-option {
            display: flex;
            align-items: center;
            padding: 10px;
            border: 1px solid #e0e0e0;
            border-radius: 10px;
            cursor: pointer;
        }
        
        .checkbox-option input {
            margin-right: 10px;
            width: 18px;
            height: 18px;
        }
        
        .price-highlight {
            color: #ff5e00;
            font-weight: 600;
        }
        
        .total {
            font-size: 1.3rem;
            font-weight: bold;
            text-align: center;
            margin: 15px 0;
            color: #ff5e00;
        }
        
        .order-btn {
            width: 100%;
            padding: 16px;
            background: #ff5e00;
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            margin-top: 10px;
            cursor: pointer;
            transition: background 0.2s;
        }
        
        .order-btn:disabled {
            background: #ffcc99;
            cursor: not-allowed;
        }
        
        .status {
            text-align: center;
            margin-top: 15px;
            font-size: 14px;
            min-height: 20px;
        }
        
        .error {
            color: #e74c3c;
        }
        
        .ingredient-info {
            font-size: 0.8rem;
            color: #666;
            margin-top: 2px;
        }
        
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="logo">
            <div class="logo-img">D</div>
            <div class="logo-text">DONER DUCK</div>
        </div>
        <div class="header-actions">
            <div class="header-icon">üë§</div>
            <div class="header-icon">üõí</div>
        </div>
    </div>
    
    <div class="search-bar">
        <input type="text" class="search-input" placeholder="–í—ã–±–µ—Ä–∏—Ç–µ –∞–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏ –∏–ª–∏ —Ç–æ—á–∫—É —Å–∞–º–æ–≤—ã–≤–æ–∑–∞">
    </div>
    
    <div class="categories">
        <div class="category active">–°–∞–º–æ–≤—ã–≤–æ–∑</div>
        <div class="category">–ü–ª–∞–≤–Ω–∞—è</div>
        <div class="category">–ê–∫—Ü–∏–∏</div>
        <div class="category">–û—Ç–∑—ã–≤—ã</div>
        <div class="category">–í–∞–∫–∞–Ω—Å–∏–∏</div>
        <div class="category">–û –Ω–∞—Å</div>
    </div>
    
    <div class="banner">
        <div class="banner-img">
            <div class="banner-content">
                <div class="banner-title">–®–∞—É—Ä–º–∞ –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è</div>
                <div class="banner-subtitle">–õ–∞–≤–∞—à, –∫–∞–ø—É—Å—Ç–∞, –∫—É—Ä–∏–Ω–æ–µ —Ñ–∏–ª–µ, —Ñ–∏—Ä–º–µ–Ω–Ω—ã–π —Å–æ—É—Å, —Ç–æ–º–∞—Ç, —Å–æ–ª–µ–Ω—ã–π –æ–≥—É—Ä–µ—Ü</div>
            </div>
        </div>
    </div>
    
    <div class="cashback">
        <div class="cashback-left">
            <div class="cashback-icon">üí∞</div>
            <div class="cashback-text">–ú–∏–Ω. —Å—É–º. —Å–∞–º–æ–≤—ã–≤–æ–∑–∞</div>
        </div>
        <div class="cashback-amount">1 Br</div>
    </div>
    
    <!-- –ë–ª–æ–∫ –∑–∞–∫–∞–∑–∞ -->
    <div class="order-block">
        <h2 class="section-title">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø</h2>
        <div class="radio-group" id="typeGroup">
            <div class="radio-option active" data-value="chicken">
                <h3>–ö—É—Ä–∏–Ω–∞—è</h3>
                <p class="ingredient-info">–°–≤–µ–∂–∞—è –∫—É—Ä–æ—á–∫–∞</p>
            </div>
            <div class="radio-option" data-value="beef">
                <h3>–ú—è—Å–Ω–∞—è</h3>
                <p class="ingredient-info">–ì–æ–≤—è–¥–∏–Ω–∞ –≤—ã—Å—à–µ–≥–æ —Å–æ—Ä—Ç–∞</p>
            </div>
        </div>
        
        <h2 class="section-title">–†–∞–∑–º–µ—Ä</h2>
        <div class="radio-group" id="sizeGroup">
            <div class="radio-option active" data-value="standard">
                <h3>–°—Ç–∞–Ω–¥–∞—Ä—Ç</h3>
                <p class="ingredient-info">30 —Å–º, 5.00 Br</p>
            </div>
            <div class="radio-option" data-value="large">
                <h3>–ë–æ–ª—å—à–∞—è</h3>
                <p class="ingredient-info">50 —Å–º, 7.50 Br</p>
            </div>
        </div>
        
        <h2 class="section-title">–ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã</h2>
        <div class="checkbox-group" id="ingredientsGroup">
            <label class="checkbox-option">
                <input type="checkbox" data-price="1.50" value="extra_meat">
                –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –º—è—Å–æ
                <span class="ingredient-info">+1.50 Br</span>
            </label>
            <label class="checkbox-option">
                <input type="checkbox" data-price="0.50" value="cucumbers">
                –°–≤–µ–∂–∏–µ –æ–≥—É—Ä—Ü—ã
                <span class="ingredient-info">+0.50 Br</span>
            </label>
            <label class="checkbox-option">
                <input type="checkbox" data-price="0.50" value="tomatoes">
                –ü–æ–º–∏–¥–æ—Ä—ã —á–µ—Ä—Ä–∏
                <span class="ingredient-info">+0.50 Br</span>
            </label>
            <label class="checkbox-option">
                <input type="checkbox" data-price="0.00" value="onion">
                –ú–∞—Ä–∏–Ω–æ–≤–∞–Ω–Ω—ã–π –ª—É–∫
                <span class="ingredient-info">–±–µ—Å–ø–ª–∞—Ç–Ω–æ</span>
            </label>
            <label class="checkbox-option">
                <input type="checkbox" data-price="0.30" value="spicy_sauce">
                –û—Å—Ç—Ä—ã–π —Å–æ—É—Å
                <span class="ingredient-info">+0.30 Br</span>
            </label>
            <label class="checkbox-option">
                <input type="checkbox" data-price="0.30" value="garlic_sauce">
                –ß–µ—Å–Ω–æ—á–Ω—ã–π —Å–æ—É—Å
                <span class="ingredient-info">+0.30 Br</span>
            </label>
        </div>
        
        <label for="quantity">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ:</label>
        <input type="number" id="quantity" min="1" value="1">
        
        <div class="total">–ò—Ç–æ–≥–æ: <span id="totalAmount" class="price-highlight">5.00</span> Br</div>
        
        <div class="status" id="status"></div>
        <button id="orderBtn" class="order-btn">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
    </div>

    <div class="bottom-bar">
        <div class="bar-item active">
            <div class="bar-icon">üè†</div>
            <div class="bar-text">–ì–ª–∞–≤–Ω–∞—è</div>
        </div>
        <div class="bar-item">
            <div class="bar-icon">üì±</div>
            <div class="bar-text">–ö–æ—Ä–∑–∏–Ω–∞</div>
        </div>
        <div class="bar-item">
            <div class="bar-icon">‚≠ê</div>
            <div class="bar-text">–ò–∑–±—Ä–∞–Ω–Ω–æ–µ</div>
        </div>
        <div class="bar-item">
            <div class="bar-icon">üí¨</div>
            <div class="bar-text">–ß–∞—Ç</div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const tg = window.Telegram.WebApp;
            tg.expand();
            tg.setHeaderColor('#ff5e00');
            tg.setBackgroundColor('#ffffff');
            
            // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–Ω–æ–ø–∫–∏ "–ù–∞–∑–∞–¥"
            if (tg.BackButton) {
                tg.BackButton.show();
                tg.BackButton.onClick(() => {
                    tg.close();
                });
            }
            
            // –ë–∞–∑–æ–≤—ã–µ —Ü–µ–Ω—ã (BYN)
            const basePrices = {
                chicken: {
                    standard: 5.00,
                    large: 7.50
                },
                beef: {
                    standard: 6.00,
                    large: 8.50
                }
            };
            
            // –¢–µ–∫—É—â–∏–µ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
            let selectedType = 'chicken';
            let selectedSize = 'standard';
            let selectedIngredients = [];
            let quantity = 1;
            
            // –≠–ª–µ–º–µ–Ω—Ç—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
            const typeOptions = document.querySelectorAll('#typeGroup .radio-option');
            const sizeOptions = document.querySelectorAll('#sizeGroup .radio-option');
            const ingredientCheckboxes = document.querySelectorAll('#ingredientsGroup input[type="checkbox"]');
            const quantityInput = document.getElementById('quantity');
            const totalAmountEl = document.getElementById('totalAmount');
            const statusEl = document.getElementById('status');
            const orderBtn = document.getElementById('orderBtn');
            
            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–µ—Ä–µ—Å—á–µ—Ç–∞ –æ–±—â–µ–π —Å—É–º–º—ã
            function calculateTotal() {
                const basePrice = basePrices[selectedType][selectedSize];
                let extrasPrice = 0;
                
                // –°—É–º–º–∏—Ä—É–µ–º —Å—Ç–æ–∏–º–æ—Å—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤
                selectedIngredients.forEach(ingredient => {
                    extrasPrice += parseFloat(ingredient.price);
                });
                
                const itemTotal = basePrice + extrasPrice;
                const total = itemTotal * quantity;
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—É–º–º—ã
                totalAmountEl.textContent = total.toFixed(2);
                
                return {
                    basePrice,
                    extrasPrice,
                    itemTotal,
                    quantity,
                    total
                };
            }
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ç–∏–ø–∞
            typeOptions.forEach(option => {
                option.addEventListener('click', () => {
                    typeOptions.forEach(opt => opt.classList.remove('active'));
                    option.classList.add('active');
                    selectedType = option.dataset.value;
                    calculateTotal();
                });
            });
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ä–∞–∑–º–µ—Ä–∞
            sizeOptions.forEach(option => {
                option.addEventListener('click', () => {
                    sizeOptions.forEach(opt => opt.classList.remove('active'));
                    option.classList.add('active');
                    selectedSize = option.dataset.value;
                    calculateTotal();
                });
            });
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤
            ingredientCheckboxes.forEach(checkbox => {
                checkbox.addEventListener('change', () => {
                    const ingredient = {
                        value: checkbox.value,
                        price: checkbox.dataset.price,
                        name: checkbox.parentElement.textContent.trim().split('\n')[0]
                    };
                    
                    if (checkbox.checked) {
                        selectedIngredients.push(ingredient);
                    } else {
                        selectedIngredients = selectedIngredients.filter(
                            ing => ing.value !== ingredient.value
                        );
                    }
                    calculateTotal();
                });
            });
            
            // –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞
            quantityInput.addEventListener('input', () => {
                const value = parseInt(quantityInput.value) || 0;
                
                if (value < 1) {
                    statusEl.textContent = '–ú–∏–Ω–∏–º—É–º 1 —à–∞—É—Ä–º–∞';
                    statusEl.className = 'status error';
                    orderBtn.disabled = true;
                    quantity = 1;
                } else {
                    statusEl.textContent = '';
                    statusEl.className = 'status';
                    orderBtn.disabled = false;
                    quantity = value;
                    calculateTotal();
                }
            });
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
            calculateTotal();
            
            // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–∫–∞–∑–∞
            orderBtn.addEventListener('click', () => {
                const totalData = calculateTotal();
                
                const orderData = {
                    type: selectedType,
                    size: selectedSize,
                    quantity: quantity,
                    ingredients: selectedIngredients.map(ing => ({
                        name: ing.name,
                        price: parseFloat(ing.price)
                    })),
                    basePrice: basePrices[selectedType][selectedSize],
                    extrasPrice: totalData.extrasPrice,
                    total: totalData.total,
                    currency: "BYN",
                    timestamp: new Date().toISOString(),
                    user: {
                        id: tg.initDataUnsafe?.user?.id,
                        first_name: tg.initDataUnsafe?.user?.first_name,
                        last_name: tg.initDataUnsafe?.user?.last_name,
                        username: tg.initDataUnsafe?.user?.username
                    }
                };
                
                // –û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ –±–æ—Ç
                tg.sendData(JSON.stringify(orderData));
                
                // –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∫–Ω–æ–ø–∫–∏ –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏
                orderBtn.disabled = true;
                orderBtn.textContent = '–ó–∞–∫–∞–∑ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω!';
                
                // –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—à–Ω–æ–º –∑–∞–∫–∞–∑–µ
                statusEl.textContent = '–í–∞—à –∑–∞–∫–∞–∑ –±—É–¥–µ—Ç –≥–æ—Ç–æ–≤ —á–µ—Ä–µ–∑ 15 –º–∏–Ω—É—Ç!';
                statusEl.className = 'status';
                
                // –ß–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã –∑–∞–∫—Ä—ã–≤–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
                setTimeout(() => {
                    tg.close();
                }, 3000);
            });
            
            // –ê–∫—Ç–∏–≤–∞—Ü–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π
            const categories = document.querySelectorAll('.category');
            categories.forEach(category => {
                category.addEventListener('click', () => {
                    categories.forEach(cat => cat.classList.remove('active'));
                    category.classList.add('active');
                });
            });
            
            // –ê–∫—Ç–∏–≤–∞—Ü–∏—è –Ω–∏–∂–Ω–µ–π –ø–∞–Ω–µ–ª–∏
            const barItems = document.querySelectorAll('.bar-item');
            barItems.forEach(item => {
                item.addEventListener('click', () => {
                    barItems.forEach(bar => bar.classList.remove('active'));
                    item.classList.add('active');
                });
            });
        });
    </script>
</body>
</html>
