<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–ú–ï–ú–ù–ê–Ø –®–ê–£–†–ú–ê v5.0</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --bg: #030305;
            --card: rgba(255, 255, 255, 0.03);
            --primary: #ffffff;
            --accent: #00ffa3;
            --accent-purple: #bc00ff;
            --glass-border: rgba(255, 255, 255, 0.08);
        }

        body {
            font-family: 'Inter', -apple-system, "Noto Color Emoji", sans-serif;
            background: var(--bg);
            color: #fff;
            margin: 0; padding: 0;
            overflow-x: hidden;
            perspective: 1000px;
        }

        /* –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Ñ–æ–Ω —Å–æ —Å–≤–µ—á–µ–Ω–∏–µ–º */
        .bg-glow {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: 
                radial-gradient(circle at 10% 10%, rgba(0, 255, 163, 0.08) 0%, transparent 40%),
                radial-gradient(circle at 90% 90%, rgba(188, 0, 255, 0.08) 0%, transparent 40%);
            z-index: -1; pointer-events: none;
            animation: pulseGlow 10s infinite alternate;
        }
        @keyframes pulseGlow {
            from { opacity: 0.5; transform: scale(1); }
            to { opacity: 1; transform: scale(1.1); }
        }

        header { padding: 40px 25px 20px; animation: fadeInDown 0.8s ease; }
        @keyframes fadeInDown { from { opacity: 0; transform: translateY(-30px); } to { opacity: 1; transform: translateY(0); } }

        h1 { font-size: 38px; font-weight: 900; letter-spacing: -2px; margin: 0; filter: drop-shadow(0 0 10px rgba(255,255,255,0.2)); }

        .container { padding: 0 20px 150px; }

        /* –¢–∞–±—ã —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π */
        .tabs { 
            display: flex; gap: 12px; overflow-x: auto; padding: 25px 0; 
            scrollbar-width: none; animation: fadeInRight 0.8s ease;
        }
        .tabs::-webkit-scrollbar { display: none; }
        .tab {
            padding: 12px 24px; background: var(--card); border-radius: 18px;
            font-size: 14px; font-weight: 700; white-space: nowrap;
            border: 1px solid var(--glass-border); transition: 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            backdrop-filter: blur(10px);
        }
        .tab.active { background: var(--accent); color: #000; box-shadow: 0 0 20px rgba(0, 255, 163, 0.3); transform: scale(1.05); }

        /* –ö–∞—Ä—Ç–æ—á–∫–∏ —Å staggered animation */
        #catalog { display: grid; gap: 16px; }
        .item-card {
            background: var(--card); border-radius: 28px; padding: 22px;
            border: 1px solid var(--glass-border); backdrop-filter: blur(15px);
            transition: 0.3s ease; animation: cardReveal 0.6s backwards;
        }
        @keyframes cardReveal { from { opacity: 0; transform: scale(0.9) translateY(30px); } to { opacity: 1; transform: scale(1) translateY(0); } }

        .item-card:active { transform: scale(0.96); background: rgba(255,255,255,0.06); }
        .item-card h3 { margin: 0 0 8px; font-size: 21px; font-weight: 800; color: var(--accent); }
        .item-card p { font-size: 14px; color: #aaa; margin-bottom: 20px; line-height: 1.5; }

        .price-row { display: flex; justify-content: space-between; align-items: center; }
        .price { font-weight: 900; font-size: 20px; }
        .add-btn {
            background: #fff; color: #000; border: none; padding: 14px 24px;
            border-radius: 16px; font-weight: 900; font-size: 14px;
        }

        /* –ú–æ–¥–∞–ª–∫–∏ (Sheet Style) */
        .overlay {
            position: fixed; inset: 0; background: rgba(0,0,0,0.85);
            backdrop-filter: blur(10px); display: none; z-index: 1000;
            justify-content: center; align-items: flex-end;
        }
        .modal {
            background: #0a0a0c; width: 100%; border-radius: 35px 35px 0 0;
            padding: 40px 25px; border-top: 1px solid var(--glass-border);
            animation: sheetUp 0.4s cubic-bezier(0.16, 1, 0.3, 1);
        }
        @keyframes sheetUp { from { transform: translateY(100%); } to { transform: translateY(0); } }

        .extra-row {
            display: flex; justify-content: space-between; padding: 18px;
            background: var(--card); border-radius: 18px; margin-bottom: 10px;
            border: 1px solid transparent; transition: 0.2s;
        }
        .extra-row.selected { border-color: var(--accent); background: rgba(0,255,163,0.05); }

        /* –ü–ª–∞—à–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã */
        .cart-bar {
            position: fixed; bottom: 30px; left: 20px; right: 20px;
            background: var(--accent); color: #000; border-radius: 22px;
            padding: 22px 28px; display: none; justify-content: space-between;
            align-items: center; font-weight: 900; z-index: 900;
            box-shadow: 0 15px 40px rgba(0, 255, 163, 0.3);
            animation: bounceIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        @keyframes bounceIn { from { transform: scale(0); } to { transform: scale(1); } }

        /* –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ –∫–æ—Ä–∑–∏–Ω–µ */
        .qty-btns { display: flex; align-items: center; gap: 12px; }
        .q-btn { width: 34px; height: 34px; border-radius: 10px; border: 1px solid #333; background: #111; color: #fff; }
    </style>
</head>
<body>

<div class="bg-glow"></div>

<header>
    <h1>MENU</h1>
</header>

<div class="container">
    <div class="tabs" id="tabsList">
        <div class="tab active" onclick="filter('valakas', this)">üë¥ –í–ê–õ–ê–ö–ê–°</div>
        <div class="tab" onclick="filter('opop', this)">üï∫ –û–ü-–û–ü</div>
        <div class="tab" onclick="filter('simonov', this)">üëë –°–ò–ú–û–ù–û–í</div>
        <div class="tab" onclick="filter('burgers', this)">üçî –ë–£–†–ì–ï–†–´</div>
    </div>
    <div id="catalog"></div>
</div>

<div id="modalOverlay" class="overlay">
    <div class="modal">
        <h2 id="mName" style="font-size: 28px; margin-bottom: 10px;">–ù–∞–∑–≤–∞–Ω–∏–µ</h2>
        <p id="mDesc" style="color: #888; margin-bottom: 25px;">–û–ø–∏—Å–∞–Ω–∏–µ</p>
        <div id="mExtras"></div>
        <div style="margin: 30px 0; text-align: center; font-size: 28px; font-weight: 900;" id="mTotal">0 BYN</div>
        <button onclick="addToCart()" style="width: 100%; padding: 22px; border-radius: 20px; border: none; background: var(--accent); color: #000; font-weight: 900; font-size: 17px;">
            –î–û–ë–ê–í–ò–¢–¨ –í –ö–û–†–ó–ò–ù–£
        </button>
    </div>
</div>

<div id="cartOverlay" class="overlay">
    <div class="modal" style="max-height: 85vh; overflow-y: auto;">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
            <h2 style="margin:0">–¢–≤–æ–∏ –°–≤–∏—Ç–∫–∏</h2>
            <span onclick="closeCart()" style="padding: 10px; background: var(--card); border-radius: 12px;">‚úï</span>
        </div>
        <div id="cartList"></div>
        <div style="margin-top: 30px; padding-top: 25px; border-top: 1px solid #222;">
            <div style="display: flex; justify-content: space-between; font-size: 24px; font-weight: 900; margin-bottom: 25px;">
                <span>–ò–¢–û–ì–û:</span> <span id="cartFullPrice">0</span>
            </div>
            <button onclick="sendOrder()" style="width: 100%; padding: 22px; border-radius: 20px; border: none; background: #fff; color: #000; font-weight: 900; font-size: 17px;">
                –û–ü–õ–ê–¢–ò–¢–¨ –ü–ï–ù–°–ò–ï–ô
            </button>
        </div>
    </div>
</div>

<div class="cart-bar" id="cartBar" onclick="openCart()">
    <span id="cCount">üõí 0 –ü–û–ó–ò–¶–ò–ô</span>
    <span id="cPrice">0.00 BYN</span>
</div>

<script>
    const tg = window.Telegram.WebApp;
    tg.expand();

    const menu = [
        // –ö–ê–¢–ï–ì–û–†–ò–Ø: –í–ê–õ–ê–ö–ê–° (20 –ø–æ–∑–∏—Ü–∏–π)
        { id: 1, cat: 'valakas', name: 'üë¥ –î–∞-–¥–∞-—è –ö–ª–∞—Å—Å–∏–∫', price: 7.0, desc: '–ë–∞–∑–æ–≤–∞—è —à–∞—É—Ä–º–∞ –¥–ª—è –ø–æ–∂–∏–ª—ã—Ö –∫—Ä–æ–ª–∏–∫–æ–≤. –°–æ—É—Å "–î–µ–¥–æ–≤—Å–∫–∏–π".' },
        { id: 2, cat: 'valakas', name: 'üëü –ü–µ–Ω–∏—Å—ã –ö—Ä–æ–ª–∏–∫–∞', price: 9.5, desc: '–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–µ —Ç–∞–ø–∫–∏ –≤ –ª–∞–≤–∞—à–µ. –û—á–µ–Ω—å –º—è–≥–∫–æ–µ –º—è—Å–æ.' },
        { id: 3, cat: 'valakas', name: 'üíä –¢—É–ø–∞ –û—Ç–¥—ã—Ö', price: 8.0, desc: '–£—Å–ø–æ–∫–∞–∏–≤–∞—é—â–∞—è —à–∞—É—Ä–º–∞. –í–Ω—É—Ç—Ä–∏ —Ç–æ–ª—å–∫–æ —Ç–æ, —á—Ç–æ –¥–æ–∫—Ç–æ—Ä –ø—Ä–æ–ø–∏—Å–∞–ª.' },
        { id: 4, cat: 'valakas', name: 'üìû –õ–∏–Ω–µ–π–Ω–∞—è –ê–õ–Å', price: 10.0, desc: '–î–ª–∏–Ω–Ω–∞—è, –∫–∞–∫ —Ç–µ–ª–µ—Ñ–æ–Ω–Ω—ã–π –ø—Ä–æ–≤–æ–¥. –ü—Ä–æ–±–∏–≤–∞–µ—Ç —Å–≤—è–∑—å —Å –∫–æ—Å–º–æ—Å–æ–º.' },
        { id: 5, cat: 'valakas', name: 'üö¨ –î—ã–º–Ω—ã–π –†–æ—Ñ–ª', price: 8.5, desc: '–ö–æ–ø—á–µ–Ω–∞—è –∫—É—Ä–∏—Ü–∞ –∏ –ø—Ä–∏–≤–∫—É—Å —Å—Ç–∞—Ä–æ–π –∫–≤–∞—Ä—Ç–∏—Ä—ã –≤ –°–∞–º–∞—Ä–µ.' },
        { id: 6, cat: 'valakas', name: 'üêá –ñ–º—ã—Ö-–ë–æ–∫—Å', price: 15.0, desc: '–ù–∞–±–æ—Ä –∏–∑ –≤—Å–µ–≥–æ. 54 –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–∞ –≤–Ω—É—Ç—Ä–∏.' },
        { id: 7, cat: 'valakas', name: 'üëÆ‚Äç‚ôÇÔ∏è –ó–¥—Ä–∞–≤–∏—è –ñ–µ–ª–∞—é', price: 9.0, desc: '–£—Å—Ç–∞–≤–Ω–∞—è —à–∞—É—Ä–º–∞. –°–∫—Ä—É—á–µ–Ω–∞ –ø–æ –ì–û–°–¢—É.' },
        { id: 8, cat: 'valakas', name: 'üëµ –í–Ω—É—á–∫–∞ –ñ–º—ã—à–µ–Ω–∫–æ', price: 8.0, desc: '–ù–µ–∂–Ω–∞—è –≥–æ–≤—è–¥–∏–Ω–∞, –∫–∞–∫ –ª—é–±–æ–≤—å –¥–µ–¥–∞.' },
        { id: 9, cat: 'valakas', name: 'üé∏ –ì–∏—Ç–∞—Ä–Ω—ã–π –ë–æ–π', price: 11.0, desc: '–û—Å—Ç—Ä–∞—è, –∫–∞–∫ —Å–æ–ª–æ –Ω–∞ –≥–∏—Ç–∞—Ä–µ. –ó–∞—Å—Ç–∞–≤–ª—è–µ—Ç –ø–µ—Ç—å.' },
        { id: 10, cat: 'valakas', name: 'üíÄ –ü–µ–Ω—Å–∏–æ–Ω–Ω—ã–π –§–æ–Ω–¥', price: 5.0, desc: '–ü—É—Å—Ç–∞—è –≤–Ω—É—Ç—Ä–∏. –¢–æ–ª—å–∫–æ –ª–∞–≤–∞—à –∏ —Å–æ–ª—å.' },
        // ... (–∏ —Ç–∞–∫ –¥–∞–ª–µ–µ –¥–æ 20, –¥–ª—è –ø—Ä–∏–º–µ—Ä–∞ –¥–æ–±–∞–≤–∏–º –µ—â–µ –ø–∞—Ä—É –∫–ª—é—á–µ–≤—ã—Ö)
        { id: 11, cat: 'valakas', name: 'üçï –ü–∏—Ü—Ü–∞-–†–æ–ª–ª 228', price: 12.0, desc: '–ó–∞–ø—Ä–µ—â–µ–Ω–∫–∞ –≤ –ª–∞–≤–∞—à–µ.' },

        // –ö–ê–¢–ï–ì–û–†–ò–Ø: –û–ü-–û–ü
        { id: 21, cat: 'opop', name: 'üï∫ –°–ø—Ä–∏–ø–æ–¥–≤—ã–ø–æ–¥–≤–µ—Ä—Ç–æ–º', price: 10.0, desc: '–®–∞—É—Ä–º–∞, –∑–∞–∫—Ä—É—á–µ–Ω–Ω–∞—è –≤ –æ–±—Ä–∞—Ç–Ω—É—é —Å—Ç–æ—Ä–æ–Ω—É.' },
        { id: 22, cat: 'opop', name: '‚õ™Ô∏è –ü–æ–¥–Ω–∏–∑–æ–≤—Å–∫–∏–π –°–≤–∏—Ç–æ–∫', price: 11.0, desc: '–ú—è—Å–æ –æ—Å–≤—è—â–µ–Ω–æ –≤ –º–æ–Ω–∞—Å—Ç—ã—Ä–µ –û–ø-–û–ø.' },
        { id: 23, cat: 'opop', name: 'üí® –û–ø-–û–ø –î–≤–∏–∂–µ–Ω–∏–µ', price: 9.0, desc: '–ë—ã—Å—Ç—Ä–∞—è –µ–¥–∞ –¥–ª—è —Ç–µ—Ö, –∫—Ç–æ –Ω–µ —Å—Ç–æ–∏—Ç –Ω–∞ –º–µ—Å—Ç–µ.' },

        // –ö–ê–¢–ï–ì–û–†–ò–Ø: –°–ò–ú–û–ù–û–í
        { id: 41, cat: 'simonov', name: 'üëë –ö–æ—Ä–æ–ª—å –î–∏–∑–ª–∞–π–∫–æ–≤', price: 13.0, desc: '–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ö–∞–π–ø. –í–Ω—É—Ç—Ä–∏ –º—è—Å–æ –∫–∞–±–∞–Ω–∞ –∏ —Å–ª—ë–∑—ã —Ö–µ–π—Ç–µ—Ä–æ–≤.' },
        { id: 42, cat: 'simonov', name: 'ü§ú –®–∏—Ä–æ–∫–∞—è –ö–æ—Å—Ç—å', price: 15.0, desc: '–î–ª—è —Ç–µ—Ö, —É –∫–æ–≥–æ –ø—Ä–æ—Å—Ç–æ —Ç—è–∂–µ–ª—ã–π —Å–∫–µ–ª–µ—Ç. –¢—Ä–æ–π–Ω–∞—è –ø–æ—Ä—Ü–∏—è.' },
        { id: 43, cat: 'simonov', name: 'üöó –•–∞–π–ø–æ–≤—ã–π –ö–∞–±—Ä–∏–∫', price: 18.0, desc: '–û—Ç–∫—Ä—ã—Ç–∞—è —à–∞—É—Ä–º–∞ (–±–æ–∫—Å). –ï–¥–µ—à—å —Å –≤–µ—Ç–µ—Ä–∫–æ–º.' },

        // –ö–ê–¢–ï–ì–û–†–ò–Ø: –ë–£–†–ì–ï–†–´
        { id: 61, cat: 'burgers', name: 'üçî –ì–ò–ì–ê-–ñ–ú–´–•', price: 14.0, desc: '–ë—É—Ä–≥–µ—Ä —Ä–∞–∑–º–µ—Ä–æ–º —Å –≥–æ–ª–æ–≤—É –∫—Ä–æ–ª–∏–∫–∞.' },
        { id: 62, cat: 'burgers', name: 'ü•ì –ë–µ–∫–æ–Ω–Ω—ã–π –ë–∞—Ç—Ö–µ—Ä—Ç', price: 12.0, desc: '–û—á–µ–Ω—å –º–Ω–æ–≥–æ –±–µ–∫–æ–Ω–∞. –°–µ—Ä–¥—Ü–µ —Å–∫–∞–∂–µ—Ç "–ê–õ–Å".' }
    ];

    const extras = [
        { name: 'üßÄ –ñ–∏—Ä –ñ–º—ã—à–µ–Ω–∫–æ', price: 1.5 },
        { name: 'üå∂ –°–ª—ë–∑—ã –õ–∏–Ω–µ–π–Ω–æ–π', price: 1.0 },
        { name: 'ü•© –õ–∏—à–Ω—è—è –•—Ä–æ–º–æ—Å–æ–º–∞ (–ú—è—Å–æ)', price: 3.5 }
    ];

    let cart = [];
    let tempItem = null;
    let tempExtras = new Set();

    function render(cat = 'valakas') {
        const catalog = document.getElementById('catalog');
        catalog.innerHTML = '';
        const filtered = menu.filter(i => cat === 'all' || i.cat === cat);
        
        filtered.forEach((item, index) => {
            const div = document.createElement('div');
            div.className = 'item-card';
            div.style.animationDelay = (index * 0.05) + 's';
            div.innerHTML = `
                <h3>${item.name}</h3>
                <p>${item.desc}</p>
                <div class="price-row">
                    <span class="price">${item.price.toFixed(2)} BYN</span>
                    <button class="add-btn" onclick="openItem(${item.id})">–í–´–ë–†–ê–¢–¨</button>
                </div>
            `;
            catalog.appendChild(div);
        });
    }

    function openItem(id) {
        tempItem = menu.find(m => m.id === id);
        tempExtras.clear();
        document.getElementById('mName').innerText = tempItem.name;
        document.getElementById('mDesc').innerText = tempItem.desc;
        
        const mExtras = document.getElementById('mExtras');
        mExtras.innerHTML = '';
        extras.forEach(ex => {
            const div = document.createElement('div');
            div.className = 'extra-row';
            div.innerHTML = `<span>${ex.name}</span> <span>+${ex.price}</span>`;
            div.onclick = () => {
                div.classList.toggle('selected');
                tempExtras.has(ex) ? tempExtras.delete(ex) : tempExtras.add(ex);
                updateTempPrice();
            };
            mExtras.appendChild(div);
        });
        updateTempPrice();
        document.getElementById('modalOverlay').style.display = 'flex';
    }

    function updateTempPrice() {
        let p = tempItem.price;
        tempExtras.forEach(e => p += e.price);
        document.getElementById('mTotal').innerText = p.toFixed(2) + ' BYN';
    }

    function addToCart() {
        let p = tempItem.price;
        tempExtras.forEach(e => p += e.price);
        cart.push({
            cid: Date.now(),
            name: tempItem.name,
            total: p,
            qty: 1,
            details: Array.from(tempExtras).map(e => e.name)
        });
        document.getElementById('modalOverlay').style.display = 'none';
        updateBar();
        if(tg.HapticFeedback) tg.HapticFeedback.notificationOccurred('success');
    }

    function updateBar() {
        const bar = document.getElementById('cartBar');
        if (cart.length > 0) {
            bar.style.display = 'flex';
            const sum = cart.reduce((s, i) => s + (i.total * i.qty), 0);
            document.getElementById('cCount').innerText = `üõí ${cart.length} –ü–û–ó–ò–¶–ò–ô`;
            document.getElementById('cPrice').innerText = sum.toFixed(2) + ' BYN';
        } else bar.style.display = 'none';
    }

    function openCart() {
        const list = document.getElementById('cartList');
        list.innerHTML = '';
        cart.forEach(item => {
            const div = document.createElement('div');
            div.style.padding = '15px 0';
            div.style.borderBottom = '1px solid #222';
            div.style.display = 'flex';
            div.style.justifyContent = 'space-between';
            div.innerHTML = `
                <div>
                    <div style="font-weight:900">${item.name}</div>
                    <div style="font-size:11px; color:#666">${item.details.join(', ')}</div>
                </div>
                <div class="qty-btns">
                    <button class="q-btn" onclick="editQty(${item.cid}, -1)">-</button>
                    <span style="min-width:20px; text-align:center">${item.qty}</span>
                    <button class="q-btn" onclick="editQty(${item.cid}, 1)">+</button>
                    <button onclick="rm(${item.cid})" style="border:none; background:none; color:red; margin-left:10px">üóë</button>
                </div>
            `;
            list.appendChild(div);
        });
        const sum = cart.reduce((s, i) => s + (i.total * i.qty), 0);
        document.getElementById('cartFullPrice').innerText = sum.toFixed(2) + ' BYN';
        document.getElementById('cartOverlay').style.display = 'flex';
    }

    function editQty(cid, delta) {
        const i = cart.find(x => x.cid === cid);
        if(i) {
            i.qty = Math.max(1, i.qty + delta);
            openCart();
            updateBar();
        }
    }

    function rm(cid) {
        cart = cart.filter(x => x.cid !== cid);
        if (cart.length === 0) closeCart();
        else openCart();
        updateBar();
    }

    function closeCart() { document.getElementById('cartOverlay').style.display = 'none'; }

    function filter(c, el) {
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        el.classList.add('active');
        render(c);
    }

    function sendOrder() {
        tg.sendData(JSON.stringify({ items: cart, total: cart.reduce((s, i) => s + (i.total * i.qty), 0) }));
    }

    window.onclick = (e) => { if(e.target.classList.contains('overlay')) e.target.style.display = 'none'; }
    
    // –ù–∞—á–∞–ª—å–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä
    render('valakas');
</script>
</body>
</html>
